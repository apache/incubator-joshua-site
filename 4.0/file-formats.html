<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" media="screen,print" href="../joshua4.css" />
    <title>Joshua | Joshua file formats</title>
  </head>

  <body>

    <div id="navbar">
      <a href="http://joshua-decoder.org/">
        <img src="../images/joshua-logo-small.png" width="130px" 
             alt="Joshua logo (picture of a Joshua tree)" />
      </a>

      <p class="infobox">
        <b>Stable version</b><br />
        4.1<br/><br/>
        <b>Release date</b><br />
        2013 January
      </p>

<!--       <div class="infobox"> -->
<!--         <b>AUTO LINKS</b><br/> -->
<!--         <ul> -->
<!--            -->
<!--           <li> Advanced features</li> -->
<!--            -->
<!--           <li> Advanced features</li> -->
<!--            -->
<!--           <li> Advanced features</li> -->
<!--            -->
<!--           <li> Building a language pack</li> -->
<!--            -->
<!--           <li> Building a language pack</li> -->
<!--            -->
<!--           <li> Bundling a configuration</li> -->
<!--            -->
<!--           <li> Contributors</li> -->
<!--            -->
<!--           <li> Decoder configuration parameters</li> -->
<!--            -->
<!--           <li> Decoder configuration parameters</li> -->
<!--            -->
<!--           <li> Decoder configuration parameters</li> -->
<!--            -->
<!--           <li> Decoder configuration parameters</li> -->
<!--            -->
<!--           <li> Frequently Asked Questions</li> -->
<!--            -->
<!--           <li> Common problems</li> -->
<!--            -->
<!--           <li> Frequently Asked Questions</li> -->
<!--            -->
<!--           <li> Common problems</li> -->
<!--            -->
<!--           <li> Features</li> -->
<!--            -->
<!--           <li> Features</li> -->
<!--            -->
<!--           <li> Features</li> -->
<!--            -->
<!--           <li> Features</li> -->
<!--            -->
<!--           <li> Joshua file formats</li> -->
<!--            -->
<!--           <li> Joshua file formats</li> -->
<!--            -->
<!--           <li> Joshua file formats</li> -->
<!--            -->
<!--           <li> Joshua file formats</li> -->
<!--            -->
<!--           <li> </li> -->
<!--            -->
<!--           <li> </li> -->
<!--            -->
<!--           <li> </li> -->
<!--            -->
<!--           <li> Fisher and CALLHOME Spanish English Speech Translation Corpus</li> -->
<!--            -->
<!--           <li> Indian Languages Parallel Corpora</li> -->
<!--            -->
<!--           <li> Joshua 4.0 User Documentation</li> -->
<!--            -->
<!--           <li> Language packs</li> -->
<!--            -->
<!--           <li> Paraphrase Packs</li> -->
<!--            -->
<!--           <li> Joshua releases</li> -->
<!--            -->
<!--           <li> Support</li> -->
<!--            -->
<!--           <li> Getting Started</li> -->
<!--            -->
<!--           <li> Welcome to Joshua</li> -->
<!--            -->
<!--           <li> Joshua documentation</li> -->
<!--            -->
<!--           <li> Joshua documentation</li> -->
<!--            -->
<!--           <li> Installation</li> -->
<!--            -->
<!--           <li> Installation</li> -->
<!--            -->
<!--           <li> Alignment with Jacana</li> -->
<!--            -->
<!--           <li> Alignment with Jacana</li> -->
<!--            -->
<!--           <li> Alignment with Jacana</li> -->
<!--            -->
<!--           <li> Building large LMs with SRILM</li> -->
<!--            -->
<!--           <li> Building large LMs with SRILM</li> -->
<!--            -->
<!--           <li> Building large LMs with SRILM</li> -->
<!--            -->
<!--           <li> Building large LMs with SRILM</li> -->
<!--            -->
<!--           <li> Lattice decoding</li> -->
<!--            -->
<!--           <li> Grammar Packing</li> -->
<!--            -->
<!--           <li> Grammar Packing</li> -->
<!--            -->
<!--           <li> Grammar Packing</li> -->
<!--            -->
<!--           <li> Grammar Packing</li> -->
<!--            -->
<!--           <li> The Joshua Pipeline</li> -->
<!--            -->
<!--           <li> The Joshua Pipeline</li> -->
<!--            -->
<!--           <li> The Joshua Pipeline</li> -->
<!--            -->
<!--           <li> The Joshua Pipeline</li> -->
<!--            -->
<!--           <li> Quick Start</li> -->
<!--            -->
<!--           <li> Quick Start</li> -->
<!--            -->
<!--           <li> Releases</li> -->
<!--            -->
<!--           <li> Server mode</li> -->
<!--            -->
<!--           <li> Server mode</li> -->
<!--            -->
<!--           <li> Server mode</li> -->
<!--            -->
<!--           <li> Installing and running the Joshua Decoder</li> -->
<!--            -->
<!--           <li> Grammar extraction with Thrax</li> -->
<!--            -->
<!--           <li> Grammar extraction with Thrax</li> -->
<!--            -->
<!--           <li> Grammar extraction with Thrax</li> -->
<!--            -->
<!--           <li> Grammar extraction with Thrax</li> -->
<!--            -->
<!--           <li> Building Translation Models</li> -->
<!--            -->
<!--           <li> Building Translation Models</li> -->
<!--            -->
<!--           <li> Building Translation Models</li> -->
<!--            -->
<!--           <li> Building Translation Models</li> -->
<!--            -->
<!--           <li> Pipeline tutorial</li> -->
<!--            -->
<!--           <li> Pipeline tutorial</li> -->
<!--            -->
<!--           <li> Pipeline tutorial</li> -->
<!--            -->
<!--           <li> What's New</li> -->
<!--            -->
<!--           <li> What's New</li> -->
<!--            -->
<!--           <li> Z-MERT</li> -->
<!--            -->
<!--           <li> Z-MERT</li> -->
<!--            -->
<!--           <li> Z-MERT</li> -->
<!--            -->
<!--           <li> Z-MERT</li> -->
<!--            -->
<!--           <li> </li> -->
<!--            -->
<!--           <li> </li> -->
<!--            -->
<!--           <li> </li> -->
<!--            -->
<!--         </ul> -->
<!--       </div>   -->

      <div class="infobox">

        <b>Links</b><br />
        <ul>
          <li> <a href="../index.html">Main</a> </li>
          <li> <a href="pipeline.html">Pipeline</a> </li>
          <li> <a href="step-by-step-instructions.html">Manual walkthrough</a> </li>
          <li> <a href="decoder.html">Decoder</a> </li>
          <li> <a href="server.html">Decoder Server</a> </li>
          <li> <a href="file-formats.html">File formats</a> </li>
          <li> <a href="thrax.html">Grammar Extraction</a> </li>
          <li> <a href="../releases.html">Releases</a> </li>
        </ul>
      </div>

      <div class="infobox">
        <b>Advanced</b><br />
        <ul>
<!--          <li> <a href="packing.html">Grammar packing</a> </li> -->
          <li> <a href="large-lms.html">Building large LMs</a> </li>
          <li> <a href="zmert.html">Running Z-MERT</a> </li>
          <li> <a href="lattice.html">Lattices</a> </li>
          <li> <a href="server.html">TCP/IP server</a> </li>
          <li> <a href="bundle.html">Bundled configuration</a> </li>
        </ul>
      </div>

      <div class="infobox">
        <b>Help</b><br />
        <ul>
          <li> <a href="faq.html">Answers</a> </li>
          <li> <a href="https://groups.google.com/d/forum/joshua_support">Archive</a> </li>
        </ul>
      </div>

      <div class="footer">
        Last updated on April 08, 2016
      </div>

    </div>

    <div id="main">
      <div id="title">
        <h1>Joshua file formats</h1>
      </div>

      <div id="content">
        
        <p>This page describes the formats of Joshua configuration and support files.</p>

<h2 id="translation-models-grammars">Translation models (grammars)</h2>

<p>Joshua supports three grammar file formats.</p>

<ol>
  <li>Thrax / Hiero</li>
  <li>SAMT [deprecated]</li>
  <li>packed</li>
</ol>

<p>The <em>Hiero</em> format is not restricted to Hiero grammars, but simply means <em>the format that David
Chiang developed for Hiero</em>.  It can support a much broader class of SCFGs containing an arbitrary
set of nonterminals.  Similarly, the <em>SAMT</em> format is not restricted to SAMT grammars but instead
simply denotes <em>the grammar format that Zollmann and Venugopal developed for their decoder</em>.  To
remove this source of confusion, “thrax” is the preferred format designation, and is in fact the
default.</p>

<p>The packed grammar format is the efficient grammar representation developed by
<a href="http://cs.jhu.edu/~juri">Juri Ganitkevich</a> <a href="packing.html">is described in detail elsewhere</a>.</p>

<p>Grammar rules in the Thrax format follow this format:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[LHS] ||| SOURCE-SIDE ||| TARGET-SIDE ||| FEATURES
</code></pre>
</div>

<p>Here are some two examples, one for a Hiero grammar, and the other for an SAMT grammar:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[X] ||| el chico [X] ||| the boy [X] ||| -3.14 0 2 17
[S] ||| el chico [VP] ||| the boy [VP] ||| -3.14 0 2 17
</code></pre>
</div>

<p>The feature values can have optional labels, e.g.:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[X] ||| el chico [X] ||| the boy [X] ||| lexprob=-3.14 abstract=0 numwords=2 count=17
</code></pre>
</div>

<p>These feature names are made up.  For an actual list of feature names, please
<a href="thrax.html">see the Thrax documentation</a>.</p>

<p>The SAMT grammar format is deprecated and undocumented.</p>

<h2 id="language-model">Language Model</h2>

<p>Joshua has three language model implementations: <a href="">KenLM</a>, <a href="">BerkeleyLM</a>, and an (unrecommended)
dummy Java implementation.  All language model implementations support the standard ARPA format
output by <a href="">SRILM</a>.  In addition, KenLM and BerkeleyLM support compiled formats that can be loaded
more quickly and efficiently.</p>

<h3 id="compiling-for-kenlm">Compiling for KenLM</h3>

<p>To compile an ARPA grammar for KenLM, use the (provided) <code class="highlighter-rouge">build-binary</code> command, located deep within
the Joshua source code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$JOSHUA/src/joshua/decoder/ff/lm/kenlm/build_binary lm.arpa lm.kenlm
</code></pre>
</div>

<p>This script takes the <code class="highlighter-rouge">lm.arpa</code> file and produces the compiled version in <code class="highlighter-rouge">lm.kenlm</code>.</p>

<h3 id="compiling-for-berkeleylm">Compiling for BerkeleyLM</h3>

<p>To compile a grammar for BerkeleyLM, type:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>java -cp $JOSHUA/lib/berkeleylm.jar -server -mxMEM edu.berkeley.nlp.lm.io.MakeLmBinaryFromArpa lm.arpa lm.berkeleylm
</code></pre>
</div>

<p>The <code class="highlighter-rouge">lm.berkeleylm</code> file can then be listed directly in the <a href="decoder.html">Joshua configuration file</a>.</p>

<h2 id="joshua-configuration">Joshua configuration</h2>

<p>See <a href="decoder.html">the decoder page</a>.</p>

<h2 id="pipeline-configuration">Pipeline configuration</h2>

<p>See <a href="pipeline.html">the pipeline page</a>.</p>

<h2 id="thrax-configuration">Thrax configuration</h2>

<p>See <a href="thrax.html">the thrax page</a>.</p>


      </div>
    </div>

  </body>
</html>





